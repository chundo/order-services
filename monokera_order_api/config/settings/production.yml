hostname: <%= ENV['HOSTNAME'] %>

# CORS configuration
cors_origins: <%= ENV.fetch('CORS_ORIGINS', '*') %>

# Allowed IPs for Rack Attack
ips:
  - "127.0.0.1"
  - "::1"
  - "localhost"

# Database configuration
# Use 'url' for full connection string (recommended for production)
# Example: postgres://user:password@host:port/database
database:
  adapter: postgresql
  encoding: unicode
  pool: <%= ENV.fetch("RAILS_MAX_THREADS") { 5 } %>
  host: <%= ENV.fetch("DATABASE_HOST", "localhost") %>
  port: <%= ENV.fetch("DATABASE_PORT", 5432) %>
  name: <%= ENV.fetch("DATABASE_NAME", "monokera_order_api_production") %>
  username: <%= ENV.fetch("DATABASE_USERNAME", "monokera_order_api") %>
  password: <%= ENV["DATABASE_PASSWORD"] %>
  url: <%= ENV['DATABASE_URL'] %>

# External services configuration
services:
  customer_service:
    base_url: <%= ENV.fetch('CUSTOMER_SERVICE_URL', 'http://customer-service:3001') %>
    timeout: <%= ENV.fetch('CUSTOMER_SERVICE_TIMEOUT', 5) %>
    open_timeout: <%= ENV.fetch('CUSTOMER_SERVICE_OPEN_TIMEOUT', 2) %>

# RabbitMQ configuration
rabbitmq:
  host: <%= ENV.fetch('RABBITMQ_HOST', 'rabbitmq') %>
  port: <%= ENV.fetch('RABBITMQ_PORT', 5672) %>
  username: <%= ENV.fetch('RABBITMQ_USERNAME', 'guest') %>
  password: <%= ENV['RABBITMQ_PASSWORD'] %>
  vhost: <%= ENV.fetch('RABBITMQ_VHOST', '/') %>
  exchange: <%= ENV.fetch('RABBITMQ_EXCHANGE', 'monokera_events') %>
  exchange_type: <%= ENV.fetch('RABBITMQ_EXCHANGE_TYPE', 'topic') %>
  connection_timeout: <%= ENV.fetch('RABBITMQ_CONNECTION_TIMEOUT', 5) %>
  heartbeat: <%= ENV.fetch('RABBITMQ_HEARTBEAT', 30) %>